<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>03 segmentation - EpiTools Wiki Pages</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../colorbox.css" rel="stylesheet">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
	
	<script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../..">EpiTools Wiki Pages</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="../..">Home</a>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Analysis Modules <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../00_projection/">00 projection</a>
</li>
                            
<li >
    <a href="../01_registration/">01 registration</a>
</li>
                            
<li >
    <a href="../02_clahe/">02 clahe</a>
</li>
                            
<li class="active">
    <a href="./">03 segmentation</a>
</li>
                            
<li >
    <a href="../04_polygonMask/">04 polygonMask</a>
</li>
                            
<li >
    <a href="../05_tracking/">05 tracking</a>
</li>
                            
<li >
    <a href="../06_skeleton/">06 skeleton</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Icy Plugins <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../Icy_Plugins/00_Installation/">00 Installation</a>
</li>
                            
<li >
    <a href="../../Icy_Plugins/01_CellOverlay/">01 CellOverlay</a>
</li>
                            
<li >
    <a href="../../Icy_Plugins/02_CellGraph/">02 CellGraph</a>
</li>
                            
<li >
    <a href="../../Icy_Plugins/03_CellExport/">03 CellExport</a>
</li>
                            
<li >
    <a href="../../Icy_Plugins/04_CellEditor/">04 CellEditor</a>
</li>
                            
<li >
    <a href="../../Icy_Plugins/05_CellSurface/">05 CellSurface</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Quick Guide <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../Quick_Guide/00_Installation/">00 Installation</a>
</li>
                            
<li >
    <a href="../../Quick_Guide/01_CreateAnalysisFile/">01 CreateAnalysisFile</a>
</li>
                            
<li >
    <a href="../../Quick_Guide/02_OpenAnalysisSM/">02 OpenAnalysisSM</a>
</li>
                            
<li >
    <a href="../../Quick_Guide/03_RunModules/">03 RunModules</a>
</li>
                            
<li >
    <a href="../../Quick_Guide/04_Connecting_icy/">04 Connecting icy</a>
</li>
                            
<li >
    <a href="../../Quick_Guide/05_Multiple_ROIs/">05 Multiple ROIs</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Support <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../Support/FAQ/">FAQ</a>
</li>
                            
<li >
    <a href="../../Support/Known_Issues/">Known Issues</a>
</li>
                            
<li >
    <a href="../../Support/Latest_News/">Latest News</a>
</li>
                            
<li >
    <a href="../../Support/Release_Notes/">Release Notes</a>
</li>
                            
<li >
    <a href="../../Support/Software_License/">Software License</a>
</li>
                        </ul>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="../02_clahe/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../04_polygonMask/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/epitools">
                                <i class="fa fa-github"></i>GitHub
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#region-growing-segmentation">Region growing segmentation</a></li>
            <li><a href="#summary">Summary</a></li>
            <li><a href="#assumptions">Assumptions</a></li>
            <li><a href="#algorithm-steps">Algorithm Steps</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="region-growing-segmentation">Region growing segmentation</h1>
<hr />
<h2 id="summary">Summary</h2>
<p>Segmentation procedure to detect the individual cells in the image and find the boundaries with a seed based region growing algorithm.  </p>
<p><img alt="Selective Plane Projection" src="../../Images/matlab/segmentation.png" /></p>
<hr />
<h2 id="assumptions">Assumptions</h2>
<p>The input image is assumed to have high intensity membrane signal on low intensity background.</p>
<hr />
<h2 id="algorithm-steps">Algorithm Steps</h2>
<h3 id="1seeding-cells">1.Seeding cells</h3>
<p>Detects individual cells by placing a seed for each cell region. Seeds are iteratively placed by raising an intensity level (low to high intensity). 
At the same time seeds are also grown into regions to detect whether an immediate neighbor region could be joined based on two thresholds.<br />
The first parameter to optimize for this step is the <code>Gaussian blur kernel</code>. After this the <code>minimum cell area</code> size and <code>minimal membrane intensity</code> can be modified
to reduce over-seeding of the cells.<br />
The reference figure when the debug option is active is <em>Figure 2: First seeding</em>.</p>
<p><code>Parameter: Gaussian Blur Kernel</code></p>
<ul>
<li>Initial gaussian blur to reduce the the sensitivity of the seeding</li>
<li>Increasing the kernel size reduces the number of seeds while reducing it increases them. Given the removal steps to follow it is better to slightly overseed the cells.</li>
<li><em>units</em> [scalar]  </li>
<li><em>recommended range</em> [0-5, decimals]</li>
</ul>
<p><code>Parameter: Minimum cell area</code></p>
<ul>
<li>Area threshold to merge touching regions with insufficient cell area.</li>
<li>The higher the threshold the more cells will be merged in the beginning because of insufficient size.</li>
<li><em>units</em> [pixels]</li>
<li><em>recommended value</em> [20]</li>
</ul>
<p><code>Parameter: Minimal membrane intensity</code></p>
<ul>
<li>Intensity threshold up to which regions which touch are merged, i.e. the membrane/boundary intensity is insufficient for two independent cells.</li>
<li>The higher the threshold, the more seeds will be initially merged.</li>
<li><em>units</em> [intensity/pixel value]</li>
<li><em>recommended value</em> [20]</li>
</ul>
<h3 id="2merge-seeds">2.Merge Seeds</h3>
<p>Regions which touch with a low boundary signal after the initial seeding are analyzed to avoid seeding a cell multiple times.
 The regions of the initial seeds are used to analyze the boundary signal.<br />
 The reference figure when the debug option is active is <em>Figure 3: Seeding after merging</em>.</p>
<p><code>Parameter: Boundary Low Intensity Ratio</code></p>
<ul>
<li>Percentage of pixels in the boundary below the following intensity threshold<ul>
<li><em>seedIntensity + std(cell background)/2</em></li>
</ul>
</li>
<li>e.g. ratio = 0.35: 35% of the pixels in the boundary have a value lower than the threshold above.</li>
<li><em>units</em> [-]  </li>
<li><em>recommended value</em> [0.35]</li>
</ul>
<h3 id="3region-growing">3.Region growing</h3>
<p>Segmentation algorithm to find the cell boundaries starting from the seeds. The strategy is very similar to the watershedding algorithm.<br />
The reference figure when the debug option is active is <em>Figure 4: First cell boundaries</em>.</p>
<p><code>parameter: Gaussian Blur Kernel</code></p>
<ul>
<li>Gaussian blur to reduce intensity fluctuations that could affect the segmentation algorithm.</li>
<li>The higher the kernel the less segmented the image will be washing out weak membrane signal.</li>
<li><em>units</em> [scalar]  </li>
<li><em>recommended range</em> [0-5, decimals]</li>
</ul>
<h3 id="4bad-region-removal">4.Bad region removal</h3>
<p>Method to avoid false positives, i.e. regions with insufficient boundary signal or that are too large to be a cell. 
This applies especially to outer regions that have not been correctly detected.<br />
The reference figure when the debug option is active is <em>Figure 5: Boundaries after poor cell removal</em></p>
<p><code>parameter: Largest Cell Area</code></p>
<ul>
<li>An upper threshold to how big a cell can be. </li>
<li>If a cell region region is greater it is removed.</li>
<li><em>units</em> [pixels]</li>
<li><em>default value</em> [3000]</li>
</ul>
<p><code>parameter: Minimal mean intensity</code></p>
<ul>
<li>A lower threshold to the minimal mean intensity on the boundary of a cell</li>
<li>If a cell has a lower mean intensity on it's boundary than the threshold it is eliminated</li>
<li><em>units</em> [intensity]</li>
<li><em>default value</em> [30]</li>
</ul>
<hr />
<h3 id="additional-parameters">Additional Parameters</h3>
<p><code>parameter: Use Clahe Image</code></p>
<ul>
<li>The segmentation will use the image processed with CLAHE</li>
<li>In order to run, this option requires that the <a href="../../02_clahe">clahe module</a> was executed beforehand</li>
<li>Activate this option when an uneven background illumination induces a poor segmentation performance</li>
</ul>
<hr />
<h3 id="debug">Debug</h3>
<ul>
<li>Set the debugging flag to view intermediate results (<strong>Attention</strong> use preferably in test mode)</li>
</ul>
<hr />
<h6 id="do-you-think-these-informations-are-not-enough-to-help-you-drop-a-line-to-the-author-and-he-will-extend-this-tutorial-asap">Do you think these informations are not enough to help you? Drop a line to the author and he will extend this tutorial asap!</h6>
<h6 id="this-page-was-written-by-davide-heller-on-3009141538">This page was written by <a href="mailto:davide.heller@imls.uzh.ch">Davide Heller</a> on 30.09.14@15.38</h6>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55332946-1', 'auto');
  ga('send', 'pageview');

</script></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '../..';</script>
        <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../js/base.js"></script><div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
